<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Travel Log — 首页</title>
  <meta name="description" content="张永和沈艳娜个人旅行记录测试首页 - 上传照片、查看游记预览" />
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#94a3b8;--accent:#38bdf8}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'PingFang SC',"Hiragino Sans GB",'Microsoft Yahei',sans-serif;background:linear-gradient(180deg,#071023 0%,#071627 100%);color:#e6eef6}
    .container{max-width:1100px;margin:36px auto;padding:20px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,#06b6d4,#7c3aed);display:flex;align-items:center;justify-content:center;font-weight:700}
    h1{font-size:20px;margin:0}
    p.lead{margin:0;color:var(--muted);font-size:13px}
    nav a{color:var(--muted);text-decoration:none;margin-left:14px;font-size:14px}

    /* search + upload */
    .toolbar{display:flex;gap:12px;align-items:center;margin:18px 0}
    .search{flex:1;display:flex}
    .search input{flex:1;padding:10px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:#071624;color:inherit}
    .btn{padding:10px 12px;border-radius:8px;background:linear-gradient(90deg,#0369a1,#0284c7);border:none;color:white;cursor:pointer}

    /* posts grid */
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);overflow:hidden}
    .thumb{height:150px;border-radius:8px;background-size:cover;background-position:center;margin-bottom:10px}
    .meta{display:flex;justify-content:space-between;align-items:center;font-size:13px;color:var(--muted)}
    .title{font-weight:600;margin:6px 0}
    .excerpt{font-size:13px;color:var(--muted);line-height:1.5}

    footer{margin-top:26px;color:var(--muted);font-size:13px;text-align:center}

    /* modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(4,6,12,0.6);z-index:40}
    .modal.open{display:flex}
    .modal .dialog{width:min(900px,96%);max-height:90vh;overflow:auto;background:linear-gradient(180deg,#071428,#041022);padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.04)}
    .modal .dialog img{max-width:100%;border-radius:8px}

    /* small helpers */
    .flex{display:flex;gap:8px;align-items:center}
    .chip{padding:6px 8px;border-radius:999px;background:rgba(255,255,255,0.03);font-size:12px}
    .uploader{display:flex;gap:8px;align-items:center}
    .preview{width:64px;height:64px;border-radius:8px;background:#0b1220;border:1px dashed rgba(255,255,255,0.03);display:flex;align-items:center;justify-content:center;font-size:12px;color:var(--muted)}

    @media (max-width:600px){.brand h1{font-size:16px}.thumb{height:120px}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">TL</div>
        <div>
          <h1>Travel Log</h1>
          <p class="lead">张永和沈艳娜恋爱记录网站测试</p>
        </div>
      </div>
      <nav>
        <a href="#">首页</a>
        <a href="#">地图</a>
        <a href="#">关于</a>
      </nav>
    </header>

    <section class="toolbar">
      <div class="search">
        <input id="q" placeholder="搜索城市、标题或内容（示例：东京 / 京都）" />
      </div>
      <button class="btn" id="btn-search">搜索</button>
      <div class="uploader">
        <label class="btn" >上传照片</label>
        <input id="file" type="file" accept="image/*" style="display:none" />
        <div class="preview" id="preview">预览</div>
      </div>
    </section>

    <main>
      <div class="grid" id="posts"></div>
    </main>

    <footer>
      这是一个测试页面。
    </footer>
  </div>

  <!-- modal for post -->
  <div class="modal" id="modal">
    <div class="dialog">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <div>
          <h3 id="modal-title" style="margin:0"></h3>
          <div id="modal-meta" style="color:var(--muted);font-size:13px"></div>
        </div>
        <button class="btn" id="modal-close">关闭</button>
      </div>
      <img id="modal-img" alt=""> 
      <p id="modal-body" style="color:var(--muted);margin-top:12px;line-height:1.6"></p>
    </div>
  </div>

  <script>
    // sample data — 可替换为 API 调用
    const samplePosts = [
      {
        id:1, title:'第一次出门旅游', city:'宁波', date:'2025-09-21',
        excerpt:'在宁波的街道上，写下愿望。',
        img:'imgs/ningbo.jpg?w=1200&auto=format&fit=crop&q=60'
      },
      {
        id:2, title:'国庆南昌之旅', city:'南昌', date:'2025-10-02',
        excerpt:'人很多，但红叶真的很美，清晨的光线最适合拍照。',
        img:'imgs/nanchang.jpg?w=1200&auto=format&fit=crop&q=60'
      },
      {
        id:3, title:'国庆南昌之旅', city:'南昌', date:'2023-11-10',
        excerpt:'测试测试测试',
        img:'imgs/nanchang.jpg?w=1200&auto=format&fit=crop&q=60'
      }
    ];

    const postsEl = document.getElementById('posts');
    const qEl = document.getElementById('q');
    const btnSearch = document.getElementById('btn-search');

    function renderList(list){
      postsEl.innerHTML = '';
      if(!list.length){ postsEl.innerHTML = '<div style="color:var(--muted)">没有匹配的日志</div>'; return }
      list.forEach(p=>{
        const card = document.createElement('div'); card.className='card';
        card.innerHTML = `
          <div class="thumb" style="background-image:url('${p.img}')"></div>
          <div class="meta"><div class="chip">${p.city}</div><div>${p.date}</div></div>
          <div class="title">${p.title}</div>
          <div class="excerpt">${p.excerpt}</div>
        `;
        card.addEventListener('click',()=>openModal(p));
        postsEl.appendChild(card);
      })
    }

    function openModal(p){
      document.getElementById('modal-title').textContent = p.title;
      document.getElementById('modal-meta').textContent = p.city + ' · ' + p.date;
      document.getElementById('modal-img').src = p.img;
      document.getElementById('modal-body').textContent = p.excerpt + '\n\n（这是测试内容，实际文章会更长。）';
      document.getElementById('modal').classList.add('open');
    }

    document.getElementById('modal-close').addEventListener('click',()=>{
      document.getElementById('modal').classList.remove('open');
    });

    // search
    btnSearch.addEventListener('click',()=>{
      const q = qEl.value.trim().toLowerCase();
      if(!q){ renderList(samplePosts); return }
      const out = samplePosts.filter(p=> (p.title+p.city+p.excerpt).toLowerCase().includes(q) );
      renderList(out);
    });

    // image preview (local only)
    const fileEl = document.getElementById('file');
    const preview = document.getElementById('preview');
    fileEl.addEventListener('change', async (e)=>{
      const f = e.target.files && e.target.files[0];
      if(!f) return;
      const url = URL.createObjectURL(f);
      preview.style.backgroundImage = `url(${url})`; preview.textContent='';
      // 如果想把图片上传到 API，可以在这里发请求
    });

    // initial render
    renderList(samplePosts);
  </script>
</body>
</html>
